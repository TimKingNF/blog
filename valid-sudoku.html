<!doctype html>
<html lang="">
<head>
	<meta charset="utf-8"/>
	<title>有效的数独 - 小花园</title>

	<meta name="author" content="timking" />
	<meta name="copyright" content="timking" />

	<meta property="og:site_name" content="小花园" />


	<meta name="twitter:card" content="summary" />
	<meta name="twitter:title" content="有效的数独" />
	<meta name="date" content="2018-07-01 00:00:00+08:00" />
	<meta property="og:type" content="article" />
	<meta property="og:locale" content="en" />
	<meta property="og:published_time" content="2018-07-01 00:00:00+08:00" />
	<meta property="og:title" content="有效的数独" />
	<meta property="og:url" content="https://timkingnf.github.io/blog/valid-sudoku.html" />
	<meta property="og:description" content="LeetCode - 探索 - 初级算法" />
	<meta name="description" content="LeetCode - 探索 - 初级算法" />

	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0" />
	<link rel="shortcut icon" href="https://timkingnf.github.io/blog/theme/favicon.ico" type="image/x-icon" />
	<link rel="icon" href="https://timkingnf.github.io/blog/theme/favicon.ico" type="image/x-icon" />
	<link href='https://fonts.googleapis.com/css?family=Droid+Sans:700,400|Droid+Sans+Mono' rel='stylesheet' type='text/css' />
	<link rel="stylesheet" href="https://timkingnf.github.io/blog/theme/css/main.css" type="text/css" />

	<!--[if lt IE 9]>
		<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
<script src="https://cdn.rawgit.com/leafo/sticky-kit/v1.1.2/jquery.sticky-kit.min.js"></script>
<script src="https://timkingnf.github.io/blog/theme/js/require.js"></script>
<script type="text/javascript">
	requirejs.config({
		baseUrl: "theme",
		paths: {
			"plotly-latest": 'js/plotly-latest.min',
			"embed-amd": "js/embed-amd",
		},
		waitSeconds: 0, // 设置模块等待js加载
	});
	require(
		[

		],
		function(){
			// 固定元素
			$(".toc, .search_warpper").stick_in_parent({
				parent: ".content"
			});
		}
	)
</script>

	<link href="https://timkingnf.github.io/blog/feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="小花园 RSS Feed" />

</head>

<body>
	<header class="clearfix" role="banner">
		<!-- <div class="wrapper">
			<h1 class="huge">
				<a href="https://timkingnf.github.io/blog">小花园</a>
			</h1>
		</div> -->
	</header>

<div role="main" class="content clearfix">
	<article>
		<div class="post wrapper">
			<h1>有效的数独</h1>
			<p>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><a href="https://leetcode-cn.com/problems/valid-sudoku/description/">原文链接</a></p>
</blockquote>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>判断一个 9x9 的数独是否有效。只需要根据以下规则，验证已经填入的数字是否有效即可。</p>
<p>数字 1-9 在每一行只能出现一次。
数字 1-9 在每一列只能出现一次。
数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。</p>
<p><img alt="数独" src="https://timkingnf.github.io/blog/images/LeetCode/valid-sudoku/250px-Sudoku-by-L2G-20050714.png"/></p>
<p>上图是一个部分填充的有效的数独。</p>
<p>数独部分空格内已填入了数字，空白格用 '.' 表示。</p>
<p><strong>示例 1:</strong></p>
<pre><code>输入:
[
  ["5","3",".",".","7",".",".",".","."],
  ["6",".",".","1","9","5",".",".","."],
  [".","9","8",".",".",".",".","6","."],
  ["8",".",".",".","6",".",".",".","3"],
  ["4",".",".","8",".","3",".",".","1"],
  ["7",".",".",".","2",".",".",".","6"],
  [".","6",".",".",".",".","2","8","."],
  [".",".",".","4","1","9",".",".","5"],
  [".",".",".",".","8",".",".","7","9"]
]
输出: true</code></pre>
<p><strong>示例 2:</strong></p>
<pre><code>输入:
[
  ["8","3",".",".","7",".",".",".","."],
  ["6",".",".","1","9","5",".",".","."],
  [".","9","8",".",".",".",".","6","."],
  ["8",".",".",".","6",".",".",".","3"],
  ["4",".",".","8",".","3",".",".","1"],
  ["7",".",".",".","2",".",".",".","6"],
  [".","6",".",".",".",".","2","8","."],
  [".",".",".","4","1","9",".",".","5"],
  [".",".",".",".","8",".",".","7","9"]
]
输出: false
解释: 除了第一行的第一个数字从 5 改为 8 以外，空格内其他数字均与 示例1 相同。
     但由于位于左上角的 3x3 宫内有两个 8 存在, 因此这个数独是无效的。</code></pre>
<p><strong>说明:</strong></p>
<ul>
<li>一个有效的数独（部分已被填充）不一定是可解的。</li>
</ul>
<ul>
<li>只需要根据以上规则，验证已经填入的数字是否有效即可。</li>
</ul>
<ul>
<li>给定数独序列只包含数字 1-9 和字符 '.' 。</li>
</ul>
<ul>
<li>给定数独永远是 9x9 形式的。</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="解答">解答<a class="anchor-link" href="#解答">&para;</a></h2><p>初步看到题目的时候，判断思路比较简单，就是判断行、列和九宫格的矩阵是否存在重复的数字。</p>
<p>我这边思路是通过，判断数字的实际个数，与数组 <code>set</code> 散列化之后的实际个数，如果大小不相等，则说明存在有重复的数字。</p>
<p>通过重复比较行、列、九宫格的值，如果不相等则跳出返回。最后如果判断全部完成，则说明是一个合理的数独。</p>
<p>写出代码如下：</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">isValidSudoku</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        :type board: List[List[str]]</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        """</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">Counter</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
            <span class="n">column_list</span> <span class="o">=</span> <span class="p">[</span> <span class="n">board</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="p">]</span> 
            <span class="n">matrix_x</span> <span class="o">=</span> <span class="n">i</span> <span class="o">//</span> <span class="mi">3</span>
            <span class="n">matrix_y</span> <span class="o">=</span> <span class="n">i</span><span class="o">%</span><span class="k">3</span>
            <span class="n">matrix</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">board</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">matrix_x</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="n">matrix_x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">matrix_y</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="n">matrix_y</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">column_list</span><span class="p">,</span> <span class="n">matrix</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">!=</span> <span class="mi">9</span> <span class="o">-</span> <span class="n">Counter</span><span class="p">(</span><span class="n">v</span><span class="p">)[</span><span class="s2">"."</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>这里我利用了一个数据结构 <code>Counter</code> 来将数组转化为相应的计数器，然后通过判断分别判断行、列、九宫格是否存在重复数字。</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="优化">优化<a class="anchor-link" href="#优化">&para;</a></h2><p>但是以上解答实际上有个缺点，首先，其需要多次取值来构造判断的数组，其次，利用 <code>Counter</code> 也是对数组的一层遍历。</p>
<p>这里可以修改一下思路，使用字典遍历所有的元素来辅助我们达到一样的效果。</p>
<p>参考了一下时间耗时最短的写法，代码如下:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">isValidSudoku</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        :type board: List[List[str]]</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        """</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="s1">''</span><span class="p">]</span> <span class="o">*</span> <span class="mi">9</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">''</span><span class="p">]</span> <span class="o">*</span> <span class="mi">9</span>
        <span class="n">grids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">''</span><span class="p">]</span> <span class="o">*</span> <span class="mi">9</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">board</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">v</span> <span class="o">!=</span> <span class="s2">"."</span><span class="p">:</span>
                    <span class="n">grid_index</span> <span class="o">=</span>  <span class="n">idx</span> <span class="o">//</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">i</span> <span class="o">//</span> <span class="mi">3</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">or</span> \
                        <span class="n">v</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">or</span> \
                        <span class="n">v</span> <span class="ow">in</span> <span class="n">grids</span><span class="p">[</span><span class="n">grid_index</span><span class="p">]:</span>
                        <span class="k">return</span> <span class="kc">False</span>
                    <span class="n">rows</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">+=</span> <span class="n">v</span>
                    <span class="n">cols</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">v</span>
                    <span class="n">grids</span><span class="p">[</span><span class="n">grid_index</span><span class="p">]</span> <span class="o">+=</span> <span class="n">v</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="一点备注">一点备注<a class="anchor-link" href="#一点备注">&para;</a></h2><p>在尝试第二种解法的时候，一开始我是想着通过数组来存放 <code>rows</code> 、<code>cols</code> 、<code>grids</code> 中的每一组元素，在初始化的时候用使用了 <code>[[]] * 9</code> 这样的方式来初始化空数组。</p>
<p>但是在赋值的时候，发现造成了一个类似广播的效果。大概如下图。</p>
<p><img alt="错误的赋值" src="https://timkingnf.github.io/blog/images/LeetCode/valid-sudoku/error_assign.gif"/></p>
<p>一开始还没有想出来问题所在，后来想了想，发现是应该是在数组乘法操作的时候，实际上是将该数组的内存拷贝了若干次。</p>
<p>此时原数组进行修改，自然会应用到所有的元素上去。</p>
<p>通过打印元素的 <code>id</code> 也可以证明这一点。</p>
</div>
</div>
</div>
</p>

			<!-- <a href="https://twitter.com/share" class="twitter-share-button" data-via="" data-lang="en" data-size="large" data-related="">Tweet</a>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> -->

			<div class="page-nav">
				<a class="btn left" href="https://timkingnf.github.io/blog/two-sum.html">
					← 两数之和
				</a>
			</div>

			<div class="comments">
				<h2>Comments !</h2>
			    <div id="disqus_thread"></div>
			    <script type="text/javascript">
			       var disqus_identifier = "valid-sudoku.html";
			       (function() {
			       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			       dsq.src = 'https://https-timkingnf-github-io-blog.disqus.com/embed.js';
			       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			      })();
				</script>
			</div>
		</div>

<div class="wrapper meta">
	<ul class="nav">
		<li><a href="https://timkingnf.github.io/blog/index.html">Home</a></li>
		<li><a href="https://timkingnf.github.io/blog/archives.html">Archive</a></li>
		<li><a href="https://timkingnf.github.io/blog/tags.html">Tags</a></li>
		<li><a href="https://timkingnf.github.io/blog/categories.html">Categories</a></li>
		<li><a href="https://timkingnf.github.io/blog/feeds/all.rss.xml">Feed</a></li>

		<li><a href="https://github.com/TimKingNF">GitHub</a></li>
		<li><a href="mailto:timking.nf@foxmail.com">Email</a></li>
	</ul>

	<div class="search_warpper">
		<h2>Search</h2>
		<form action="https://timkingnf.github.io/blog/search.html">
			<div class="tipue_search_group">
			<input type="text" name="q" class="search_text" pattern=".{3,}" title="At least 3 characters" required>
			</div>
		</form>

		<div id="tipue_search_content"></div>
	</div>
</div>

<div class="meta wrapper">
	<time datetime="2018-07-01T00:00:00+08:00" pubdate>
		2018-07-01
	</time>


	<ul class="tag clearfix">
		<li><a href="https://timkingnf.github.io/blog/category/leetcode.html">LeetCode</a></li>

	</ul>

	<ul class="tag clearfix">
				<li><a href="https://timkingnf.github.io/blog/tag/shu-zu.html">数组</a></li>
				<li><a href="https://timkingnf.github.io/blog/tag/suan-fa.html">算法</a></li>
	</ul>

	<nav class="toc">
		<div id="toc"><ul><li><a class="toc-href" href="#解答" title="解答&para;">解答&para;</a></li><li><a class="toc-href" href="#优化" title="优化&para;">优化&para;</a></li><li><a class="toc-href" href="#一点备注" title="一点备注&para;">一点备注&para;</a></li></ul></div>
	</nav>
</div>

	</article>
</div>

	<a href="#" class="scoll-top"></a>

	<!-- <footer class="clearfix">

		<a href="#" class="scoll-top"></a>

	</footer> -->

	<script>
	  var _gaq=[['_setAccount','UA-120924939-1'],['_trackPageview']];
	  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
	  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
	  s.parentNode.insertBefore(g,s)}(document,'script'));
	</script>

</body>
</html>